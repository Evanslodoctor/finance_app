stock_data/models.py
from django.db import models

class Transaction(models.Model):
    TRANSACTION_TYPES = [
        ('income', 'Income'),
        ('expense', 'Expense'),
    ]

    description = models.CharField(max_length=255)
    amount = models.DecimalField(max_digits=10, decimal_places=2)
    transaction_type = models.CharField(max_length=7, choices=TRANSACTION_TYPES)
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f"{self.description} - {self.transaction_type} - {self.amount}"

stock_data/urls.py
from django.contrib import admin
from django.urls import path
from . import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', views.home, name='home'),
    path('transactions/', views.transactions, name='transactions'),
    path('transactions/add/', views.add_transaction, name='add_transaction'),
    path('transactions/delete/<int:id>/', views.delete_transaction, name='delete_transaction'),
]
stock_data/views.py
from django.shortcuts import render, redirect
from django.db.models import Sum
from .models import Transaction

def home(request):
    total_income = Transaction.objects.filter(transaction_type='income').aggregate(total=Sum('amount'))['total'] or 0
    total_expense = Transaction.objects.filter(transaction_type='expense').aggregate(total=Sum('amount'))['total'] or 0
    context = {
        'total_income': total_income,
        'total_expense': total_expense,
        'balance': total_income - total_expense
    }
    return render(request, 'home.html', context)

def transactions(request):
    all_transactions = Transaction.objects.all()
    context = {'transactions': all_transactions}
    return render(request, 'transactions.html', context)

def add_transaction(request):
    if request.method == 'POST':
        description = request.POST['description']
        amount = request.POST['amount']
        transaction_type = request.POST['transaction_type']
        transaction = Transaction(description=description, amount=amount, transaction_type=transaction_type)
        transaction.save()
        return redirect('transactions')
    return render(request, 'add_transaction.html')

def delete_transaction(request, id):
    transaction = Transaction.objects.get(id=id)
    transaction.delete()
    return redirect('transactions')
stock_data/test.py
from django.test import TestCase
from .models import StockPrice
from .utils import fetch_stock_data, backtest

class StockDataTestCase(TestCase):
    def test_fetch_stock_data(self):
        fetch_stock_data('AAPL')
        stock_data = StockPrice.objects.filter(symbol='AAPL')
        self.assertTrue(stock_data.exists())

    def test_backtesting(self):
        stock_data = StockPrice.objects.filter(symbol='AAPL')
        initial_investment = 1000
        result = backtest(stock_data, initial_investment)
        self.assertIsInstance(result, float)
home.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Overview</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<body>
    <h1>Finance Overview</h1>
    <p>Total Income: ${{ total_income }}</p>
    <p>Total Expenses: ${{ total_expense }}</p>
    <p>Balance: ${{ balance }}</p>

    <a href="{% url 'transactions' %}">View Transactions</a>
</body>
</html>
add_transaction.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Transaction</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<body>
    <h1>Add Transaction</h1>
    <form method="POST">
        {% csrf_token %}
        <label for="description">Description:</label>
        <input type="text" id="description" name="description" required><br>

        <label for="amount">Amount:</label>
        <input type="number" id="amount" name="amount" required><br>

        <label for="transaction_type">Type:</label>
        <select id="transaction_type" name="transaction_type">
            <option value="income">Income</option>
            <option value="expense">Expense</option>
        </select><br>

        <button type="submit">Add Transaction</button>
    </form>
</body>
</html>
transaction.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<body>
    <h1>Transactions</h1>
    <a href="{% url 'add_transaction' %}">Add New Transaction</a>
    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th>Amount</th>
                <th>Type</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in transactions %}
            <tr>
                <td>{{ transaction.description }}</td>
                <td>{{ transaction.amount }}</td>
                <td>{{ transaction.transaction_type }}</td>
                <td>
                    <a href="{% url 'delete_transaction' transaction.id %}">Delete</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
